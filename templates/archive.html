<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê—Ä—Ö–∏–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã -->
    <button class="theme-toggle" id="themeToggle">üåô</button>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞ -->
    <div id="xlsxModal" class="modal">
        <div class="modal-content">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω</h3>
            <select id="templateSelectForXLSX">
                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω --</option>
                <option value="–í —Å—Ç—Ä–æ–∫—É">–í —Å—Ç—Ä–æ–∫—É</option>
                <option value="–í —è—á–µ–π–∫—É">–í —è—á–µ–π–∫—É</option>
            </select>

            <!-- –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–±–æ—Ä —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –¥–ª—è "–í —è—á–µ–π–∫—É") -->
            <div id="separatorSection" style="display: none; margin-top: 15px;">
                <label for="separatorSelect">–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Å—Å—ã–ª–æ–∫:</label>
                <select id="separatorSelect">
                    <option value="comma">–ó–∞–ø—è—Ç–∞—è</option>
                    <option value="newline">–ü–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏</option>
                </select>
            </div>

            <button id="confirmXLSXBtn" class="btn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
            <button id="cancelXLSXBtn" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <div id="imageModal" class="image-modal">
        <span class="image-modal-close" id="imageModalClose">&times;</span>
        <button class="image-modal-nav image-modal-prev" id="imageModalPrev">&#10094;</button>
        <button class="image-modal-nav image-modal-next" id="imageModalNext">&#10095;</button>
        <img class="image-modal-content" id="imageModalImg">
        <div class="image-modal-info">
            <div class="image-modal-filename" id="imageModalFilename"></div>
            <div class="image-modal-url" id="imageModalUrl"></div>
        </div>
    </div>

    <div class="page-container">
        <div class="content-wrap">
            <div class="container">
                <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - —Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–∏–∫—É–ª–æ–≤ -->
                <div class="upload-section">
                    <h1>–ê—Ä—Ö–∏–≤</h1>
                    {% if error %}
                        <div class="error">{{ error }}</div>
                    {% else %}
                    <!-- –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–≥—Ä—É–∑–∫–∞–º" -->
                    <a href="/admin" class="btn-secondary" style="margin-bottom: 20px; display: inline-block; text-decoration: none; width: 100%; text-align: center;">
                        üì§ –ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–≥—Ä—É–∑–∫–∞–º
                    </a>

                        <div class="form-group">
                            <label for="templateSelect">–ê–ª—å–±–æ–º:</label>
                            <select id="templateSelect" name="template_name" required>
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∞–ª—å–±–æ–º --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="articleSelect">–ê—Ä—Ç–∏–∫—É–ª:</label>
                            <select id="articleSelect" name="article_name" disabled>
                                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª --</option>
                            </select>
                        </div>
                        <button id="showAllBtn" class="btn btn-primary">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏</button>
                    {% endif %}
                </div>

                <!-- ============   –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - —Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫   ============ -->
                <div class="links-section">
                    <h1 id="archiveTitle">–í—ã–±–µ—Ä–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª</h1>
                        <!-- –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û–¢ –ë–õ–û–ö -->
                        <div id="fileCounter" style="margin-bottom: 15px; padding: 10px; background: var(--url-item-bg); border-radius: 8px; text-align: center; font-weight: bold; display: none;">
                            –§–∞–π–ª–æ–≤: <span id="fileCount">0</span>
                        </div>
                    <div class="url-list" id="urlList"></div>
                    <div class="bulk-actions" id="bulkActions" style="display: none;">
                        <button class="btn btn-secondary" id="copyAllBtn">
                            üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ (–∑–∞–ø—è—Ç–∞—è)
                        </button>
                        <button class="btn btn-secondary" id="copyAllListBtn">
                            üìù –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ (–ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏)
                        </button>
                        <button class="btn btn-secondary" id="triggerXLSXModalBtn">
                            üìã –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç XLSX
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <footer class="footer">
            <p>–°–¥–µ–ª–∞–Ω–æ –≤ –ì–†–ê–î–ò–ï–ù–¢</p>
        </footer>
    </div>

    <script>
        // –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Flask –≤ JavaScript
        const imageData = {{ image_data | tojson }};
    </script>
    <script src="{{ url_for('static', filename='js/archive.js') }}"></script>
</body>
</html>